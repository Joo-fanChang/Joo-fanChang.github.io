<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>webpack4配置全记录 | changzhn`s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/./categories/web">web</a>
    
  
    
      <a href="/./categories/微信">微信</a>
    
  
    
      <a href="/./categories/git">git</a>
    
  
    
      <a href="/./categories/服务端">服务端</a>
    
  
    
      <a href="https://github.com/Joo-fanChang">about</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2018/04/17/webpack4/">webpack4配置全记录</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">April 17 2018</p>
  </section>

  <section class="article-entry">
    <p>持续更新…<br>最后更新时间2018.4.17</p>
<h2 id="1-配置分离"><a href="#1-配置分离" class="headerlink" title="1 配置分离"></a>1 配置分离</h2><p>项目过大的时候，配置文件最好是分离开来。导出<code>webpack</code>配置的时候，需要使用<code>webpack-merge</code>这个包。<br>比如</p>
<ul>
<li>webpack.base.js</li>
<li>webpack.dev.js</li>
<li>webpack.prod.js</li>
</ul>
<p>其中<code>base</code>放一些基本的配置。<code>dev</code>中可以配置<code>devServer</code>等开发时的参数。<code>prod</code>中配置压缩等配置。</p>
<h2 id="2-entry-output"><a href="#2-entry-output" class="headerlink" title="2 entry output"></a>2 entry output</h2><h3 id="2-1-默认值"><a href="#2-1-默认值" class="headerlink" title="2.1 默认值"></a>2.1 默认值</h3><p>在webpack4中，给了这两个<code>key</code>了默认值。分别为<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>也就是说，如果在一个项目目录中没有任何配置的话，直接运行<code>webpack</code>也是可以的。</p>
<p><strong>TIPS</strong></p>
<ol>
<li>在webpack4中，命令行与配置文件已经分成两个包了。如果直接使用命令行工具的话，需要使用<code>webpack-cli</code>这个包。</li>
<li>如果想更改<code>output.path</code>的时候，也需要加了<code>entry</code>参数，也就是说，修改默认参数的时候，两个需要一起修改。否则就会报一个<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR in multi (webpack)-dev-server/client?http://localhost:8080 ./src</span><br><span class="line">Module not found: Error: Can&apos;t resolve &apos;./src&apos; in &apos;/Users/changzhn/git/webp4&apos;</span><br><span class="line"> @ multi (webpack)-dev-server/client?http://localhost:8080 ./src</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>因此就算和默认值相同也要加了<code>entry</code>属性</p>
<h3 id="2-2-output-publicPath"><a href="#2-2-output-publicPath" class="headerlink" title="2.2 output.publicPath"></a>2.2 output.publicPath</h3><blockquote>
<p>这是我找工作的时候一道面试题</p>
</blockquote>
<p>这个属性决定了，<code>index.html</code>文件引入静态资源的路径<br>比如：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">publicPath: <span class="string">'build'</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>开发时，该属性代表静态资源打包的路径，所以在相应<code>index.html</code>中引入<code>&lt;script src=&quot;./build/bundle.js&quot;&gt;&lt;/script&gt;</code><br>例如<code>publicPath</code>设置为 <code>xx/build/</code><br>那么相应的<code>index.html</code>引入的就是 <code>&lt;script src=&quot;./xx/build/bundle.js&quot;&gt;&lt;/script&gt;</code></li>
<li>生产时，该属性。。也是这个意思，不过可以配置<code>cdn</code>目录<br>例如<code>publicPath</code>设置为<code>https://bootcdn.com/changzhn/</code><br>那么相应的<code>index.html</code>引入就是<code>&lt;script src=&quot;https://bootcdn.com/changzhn/build/bundle.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
<h2 id="3-devServer"><a href="#3-devServer" class="headerlink" title="3 devServer"></a>3 devServer</h2><h3 id="3-1-compress"><a href="#3-1-compress" class="headerlink" title="3.1 compress"></a>3.1 compress</h3><p>boolean<br>一切服务都启用<code>gzip压缩</code><br>测试：<br>||大小|<br>|:-|:-|<br>|未压缩|337k|<br>|压缩|86.4k|</p>

  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="/images/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> changzhn`s blog </p>
      <p class="subtitle"> 中国人睡觉时，美国人大多数人在工作 </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="javascript:;"
>
  Best wishes.
</a>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'drakeleung';
  
  var disqus_url = 'https://joo-fanchang.github.io/2018/04/17/webpack4/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
